function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{sn2V:function(t,e,n){"use strict";n.r(e),n.d(e,"CustomerManagementModule",(function(){return A}));var r=n("ofXK"),o=n("tyNb"),i=n("mrSG"),a=n("EFo3"),c=n("vkgz"),s=n("0IaG"),u=n("3Pt+"),m=n("fXoL"),b=n("Stxe"),l=n("aeOW"),f=n("bTqV"),d=n("kmnG"),p=n("qFsG"),g=n("Xa2L");function h(t,e){1&t&&(m.Ub(0,"mat-error"),m.Bc(1,"Campo obrigat\xf3rio"),m.Tb())}function C(t,e){1&t&&(m.Ub(0,"mat-error"),m.Bc(1,"Campo obrigat\xf3rio"),m.Tb())}function v(t,e){1&t&&(m.Ub(0,"mat-error"),m.Bc(1,"Campo obrigat\xf3rio"),m.Tb())}function T(t,e){1&t&&(m.Ub(0,"mat-error"),m.Bc(1,"Email inv\xe1lido"),m.Tb())}function k(t,e){1&t&&(m.Ub(0,"div",14),m.Pb(1,"mat-spinner",15),m.Tb())}function U(t,e){if(1&t&&(m.Ub(0,"div",5),m.Ub(1,"form",6),m.Ub(2,"mat-form-field",7),m.Ub(3,"mat-label"),m.Bc(4,"Nome"),m.Tb(),m.Pb(5,"input",8),m.zc(6,h,2,0,"mat-error",9),m.Tb(),m.Ub(7,"mat-form-field",7),m.Ub(8,"mat-label"),m.Bc(9,"CPF"),m.Tb(),m.Pb(10,"input",10),m.zc(11,C,2,0,"mat-error",9),m.Tb(),m.Ub(12,"mat-form-field",7),m.Ub(13,"mat-label"),m.Bc(14,"Email"),m.Tb(),m.Pb(15,"input",11),m.zc(16,v,2,0,"mat-error",9),m.zc(17,T,2,0,"mat-error",9),m.Tb(),m.Ub(18,"div",12),m.zc(19,k,2,0,"ng-template",null,13,m.Ac),m.Tb(),m.Tb(),m.Tb()),2&t){var n=m.gc();m.Cb(1),m.mc("formGroup",n.customerForm),m.Cb(5),m.mc("ngIf",n.name.hasError("required")),m.Cb(5),m.mc("ngIf",n.cpf.hasError("required")),m.Cb(5),m.mc("ngIf",n.email.hasError("required")),m.Cb(1),m.mc("ngIf",n.email.hasError("email"))}}var w,y=((w=function(){function t(e,n,r,o,i,a){_classCallCheck(this,t),this.customerService=e,this.snackBarService=n,this.utilsService=r,this.formBuilder=o,this.dialogRef=i,this.data=a}return _createClass(t,[{key:"ngOnInit",value:function(){this.customer=this.data.customer,this.createForm()}},{key:"createForm",value:function(){this.customerForm=this.formBuilder.group({name:[this.customer.name,[u.n.required]],cpf:[this.customer.cpf,[u.n.required]],email:[this.customer.email,[u.n.email,u.n.required]]})}},{key:"submitCustomerUpdated",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.customerForm.invalid){t.next=4;break}this.customerForm.markAllAsTouched(),t.next=6;break;case 4:return t.next=6,this.updateCustomer();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"updateCustomer",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=this.customerForm.getRawValue()).id=this.customer.id,n={next:function(t){t&&r.dialogRef.close(t)},error:function(t){var e=r.utilsService.handleErrorMessage(t);r.snackBarService.openSnackBar(e)}},t.next=5,this.customerService.updateCustomer(e).pipe(Object(c.a)(n)).toPromise().then((function(){return!0})).catch((function(){return!1}));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"name",get:function(){return this.customerForm.get("name")}},{key:"cpf",get:function(){return this.customerForm.get("cpf")}},{key:"email",get:function(){return this.customerForm.get("email")}},{key:"password",get:function(){return this.customerForm.get("password")}},{key:"confirmPassword",get:function(){return this.customerForm.get("confirmPassword")}}]),t}()).\u0275fac=function(t){return new(t||w)(m.Ob(a.a),m.Ob(b.a),m.Ob(l.a),m.Ob(u.c),m.Ob(s.g),m.Ob(s.a))},w.\u0275cmp=m.Ib({type:w,selectors:[["es-customer-detail"]],features:[m.Bb([a.a])],decls:8,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content","",4,"ngIf"],["mat-dialog-actions","","align","right"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click"],["mat-dialog-content",""],[1,"container-registration-form",3,"formGroup"],[1,"input-full-width"],["type","text","matInput","","formControlName","name","id","name"],[4,"ngIf"],["type","text","matInput","","formControlName","cpf","id","cpf","mask","000.000.000-00"],["type","text","matInput","","formControlName","email","id","email"],[1,"actions-container"],["showLoading",""],[1,"loading"],["diameter","50"]],template:function(t,e){1&t&&(m.Ub(0,"div",0),m.Bc(1),m.Tb(),m.zc(2,U,21,5,"div",1),m.Ub(3,"div",2),m.Ub(4,"button",3),m.Bc(5,"FECHAR"),m.Tb(),m.Ub(6,"button",4),m.cc("click",(function(){return e.submitCustomerUpdated()})),m.Bc(7,"SALVAR"),m.Tb(),m.Tb()),2&t&&(m.Cb(1),m.Dc(" Editar ",e.customer.name,"\n"),m.Cb(1),m.mc("ngIf",e.customerForm))},directives:[s.h,r.n,s.c,f.a,s.d,s.e,u.o,u.k,u.e,d.c,d.f,p.b,u.b,u.j,u.d,d.b,g.b],styles:[".mat-dialog-actions[_ngcontent-%COMP%]{padding:0!important}"]}),w),B=n("Qapo"),F=n("Eby3"),O=n("Wp6s"),I=n("NFeN"),P=n("STbY");function S(t,e){1&t&&(m.Ub(0,"div",5),m.Pb(1,"mat-spinner",6),m.Tb())}function E(t,e){1&t&&(m.Ub(0,"p"),m.Bc(1," N\xe3o h\xe1 clientes cadastrados. "),m.Tb())}function _(t,e){if(1&t){var n=m.Vb();m.Ub(0,"li",10),m.Ub(1,"mat-card"),m.Ub(2,"mat-icon",11),m.Bc(3,"more_vert"),m.Tb(),m.Ub(4,"mat-menu",null,12),m.Ub(6,"button",13),m.cc("click",(function(){m.tc(n);var t=e.$implicit;return m.gc(2).openEditCustomer(t)})),m.Ub(7,"span"),m.Bc(8,"Editar"),m.Tb(),m.Tb(),m.Ub(9,"button",14),m.Ub(10,"span"),m.Bc(11,"Remover"),m.Tb(),m.Tb(),m.Tb(),m.Ub(12,"mat-card-title"),m.Bc(13),m.Tb(),m.Ub(14,"mat-card-content"),m.Ub(15,"p"),m.Ub(16,"span"),m.Bc(17,"CPF:"),m.Tb(),m.Bc(18),m.Tb(),m.Ub(19,"p"),m.Ub(20,"span"),m.Bc(21,"Email:"),m.Tb(),m.Bc(22),m.Tb(),m.Tb(),m.Tb(),m.Tb()}if(2&t){var r=e.$implicit,o=m.rc(5);m.Cb(2),m.mc("matMenuTriggerFor",o),m.Cb(11),m.Cc(r.name),m.Cb(5),m.Dc(" ",r.cpf," "),m.Cb(4),m.Dc(" ",r.email," ")}}function x(t,e){if(1&t&&(m.Ub(0,"ul",7),m.zc(1,E,2,0,"p",8),m.zc(2,_,23,4,"li",9),m.Tb()),2&t){var n=m.gc();m.Cb(1),m.mc("ngIf",n.noCustomerFound),m.Cb(1),m.mc("ngForOf",n.customers)}}var R,M,L,z=[{path:"",component:(R=function(){function t(e,n,r){_classCallCheck(this,t),this.customerService=e,this.dialog=n,this.snackBarService=r,this.isLoadingCustomers=!1,this.noCustomerFound=!1,this.customers=[]}return _createClass(t,[{key:"ngOnInit",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadCustomers();case 2:case"end":return t.stop()}}),t,this)})))}},{key:"loadCustomers",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoadingCustomers=!0,e={next:function(t){t.length?n.customers=t:n.noCustomerFound=!0,n.isLoadingCustomers=!1},error:function(t){n.isLoadingCustomers=!1,n.noCustomerFound=!0}},t.next=4,this.customerService.getCustomers().pipe(Object(c.a)(e)).toPromise().then((function(){return!0})).catch((function(){return!1}));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"openEditCustomer",value:function(t){var e=this,n={next:function(t){t&&(e.snackBarService.openSnackBar(B.a.SUCCESSFULLY_UPDATED),e.loadCustomers())}};this.dialogRef=this.dialog.open(y,{data:{customer:t,isViewing:!0},autoFocus:!1,disableClose:!0,panelClass:"es-dialog"}),this.dialogRef.afterClosed().subscribe(n)}}]),t}(),R.\u0275fac=function(t){return new(t||R)(m.Ob(a.a),m.Ob(s.b),m.Ob(b.a))},R.\u0275cmp=m.Ib({type:R,selectors:[["es-customer-list"]],features:[m.Bb([a.a])],decls:6,vars:3,consts:[[3,"showMenuIcon"],[1,"title"],[1,"container-list"],["class","loading",4,"ngIf"],["class","content-list",4,"ngIf"],[1,"loading"],["diameter","50"],[1,"content-list"],[4,"ngIf"],["class","card-items",4,"ngFor","ngForOf"],[1,"card-items"],["mat-icon-button","",3,"matMenuTriggerFor"],["cardOption","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item",""]],template:function(t,e){1&t&&(m.Pb(0,"es-toolbar",0),m.Ub(1,"div",1),m.Bc(2," Clientes\n"),m.Tb(),m.Ub(3,"div",2),m.zc(4,S,2,0,"div",3),m.zc(5,x,3,2,"ul",4),m.Tb()),2&t&&(m.mc("showMenuIcon",!1),m.Cb(4),m.mc("ngIf",e.isLoadingCustomers),m.Cb(1),m.mc("ngIf",!e.isLoadingCustomers))},directives:[F.a,r.n,g.b,r.m,O.a,I.a,P.c,P.d,P.a,O.h,O.c],styles:["mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}mat-card-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}"]}),R)}],j=((M=function t(){_classCallCheck(this,t)}).\u0275mod=m.Mb({type:M}),M.\u0275inj=m.Lb({factory:function(t){return new(t||M)},imports:[[o.b.forChild(z)],o.b]}),M),q=n("kvGs"),N=n("ssao"),A=((L=function t(){_classCallCheck(this,t)}).\u0275mod=m.Mb({type:L}),L.\u0275inj=m.Lb({factory:function(t){return new(t||L)},imports:[[r.c,u.m,N.a,j,q.a]]}),L)}}]);